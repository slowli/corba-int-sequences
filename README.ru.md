corba-int-sequences
===============

Реализация взаимодействия разноязыковых программ с помощью CORBA 
на примере целочисленных последовательностей.  

Проблема взаимодействия компонентов, реализованных в различных 
программных средах — одна из ключевых задач в программной инженерии. 
Один из способов решения этой задачи — использование единого протокола 
передачи данных. Частным случаем такого подхода к взаимодействию является 
CORBA (Common Object Request Broker Architecture). При помощи CORBA клиенты 
могут взаимодействовать с удаленными сервисами (реализованными 
на различных языках программирования и выполняющимися в разных средах) 
как будто это локальные объекты.

Небольшой пример, позволяющий оценить возможности CORBA и сравнить 
производительность разных языков программирования — вычисление членов 
целочисленных последовательностей, таких как простые числа и числа Фибоначчи.

Содержание
---------------

 * **/bin** — директория, содержащая готовые клиентские и серверные программы 
   с интерфейсом командной строки:
 * **/bin/server-java.jar**, **/bin/client-java.jar** — выполняемые JAR-архивы 
   для сервера и клиента Java, соответственно;
 * **/bin/server-py[.bat]**, **/bin/client-py[.bat]** — скрипты для запуска 
   сервера и клиента Python в Linux и Windows.
 * **/bin/server-cs.exe**, **/bin/client-cs.exe** — программы для сервера и клиента
   C#.
 * **/cs** — директория с исходными файлами для C#.
 * **/java** — директория с исходными файлами для Java.
 * **/python** — директория с исходными файлами для Python.
 * **IntegerSequence.idl** — файл описания сервиса-целочисленной 
   последовательности.
 * **Makefile** — скрипт для построения проекта.
 * **Makevars** — переменные, используемые для автоматического построения 
   проекта.
 * **NMakefile**, **NMakevars** — те же файлы для утилиты nmake.

Помощь по запуску клиентов и серверов можно запустить с помощью опции `--help`.

Требования
---------------

 * Для клиента и сервера Python требуется omniORBpy (входит в репозитории ПО 
   в Linux). Доступна версия для Windows; инструкции по установке — 
   ниже в отдельном разделе.
 * Для клиента и сервера Java требуется JRE 1.7+.
 * Для клиента и сервера C# нужен Microsoft .NET Framework 4.0 или соответствующая
   версия Mono.
 * Для запуска серверов требуется сервис имен CORBA. Один такой сервис — 
   omniNames — входит в состав  omniORB; походит также сервис orbd 
   из Java Development Kit. Сервис должен быть привязан к порту 2809. В omniORB 
   этот порт используется по умолчанию; в случае использования orbd программу следует
   запускать с параметром `-ORBInitialPort 2809`.

Работоспособность программ проверена в Linux Mint 17.1 x86_64 и 
Windows 7 Home Premium x86_64.

Пример работы
---------------

Linux:
 1. Перейти в папку установки **/bin**.
 2. Запусить сервис имен CORBA: `orbd -ORBInitialPort 2809 &`.
 3. Просмотреть список реализованных последовательностей в сервере Python:
    `./server-py --list`
 4. Запустить сервер Python: `./server-py > server-py.log &`
 5. Посмотреть список зарегистированных последовательностей с помощью клиента Java:
    `./client-java.jar --list`
 6. Получить числа Фибоначчи с индексами 100, 200 и 300 из клиента C#:
    `./client-cs.exe fib 100 200 300`

Windows (те же действия):
 1. cd bin
 2. start orbd -ORBInitialPort 2809
 3. server-py --list
 4. start server-py
 5. client-java.jar --list
 6. client-cs fib 100 200 300

Построение из исходников
---------------

Для построения в Linux следует выполнить в корневой папке дистрибутива команды 

`  make && make install`

Созданные запускаемые файлы клиентов и серверов располагаются в папке /bin
(назначение можно изменить в файле Makevars).

В Windows для автоматического построения можно использовать утилиту nmake, поставляемую
с Microsoft Visual Studio:
`nmake /f NMakefile`  
`nmake /f NMakefile install`

Параметры сборки можно изменить в файле NMakevars.

Установка omniORB в Windows
---------------

 1. Скачать и распаковать
    [omniORB](http://sourceforge.net/projects/omniorb/files/omniORB/omniORB-4.2.0/) и 
    [ombiORBpy](http://sourceforge.net/projects/omniorb/files/omniORBpy/omniORBpy-4.2.0/).
 2. Копировать содержимое папки **/lib** из ombiORBpy в папку **/lib** 
    ombiORB. Конфликты при копировании можно решать любым образом 
    (соответствующие файлы одинаковы).
 3. Установить переменные среды Windows:
    * Добавить в PATH папку %ROOT%\bin\x86_win32 (%ROOT% - корневая директория 
      установки omniORB),чтобы система видела запускаемые файлы omniORB.
    * Добавить в переменную PYTHONPATH (путь к библиотекам Python) директории 
      omniORBpy:  
      `PYTHONPATH=%PYTHONPATH%;%ROOT%\lib\python;%ROOT%\lib\x86_win32`
    * Создать переменную OMNINAMES_LOGDIR, в которую поместить путь к директории, 
      в которую сервис имен omniNames будет хранить данные. Можно, например, 
      для этой цели создать папку %ROOT%\omninames.
 4. Отредактировать файл %ROOT%\sample.reg, в котором содержатся настройки omniORB:
    * Найти строку [HKEY_LOCAL_MACHINE\SOFTWARE\omniORB\InitRef] и вставить 
      после нее  
      `"0"="NameService=corbaname::localhost"`.  
	  Эта настройка определяет расположение сервиса имен CORBA.
    * Заменить в том же файле `"supportBootstrapAgent" = "0"` 
      на `"supportBootstrapAgent" = "1"` для поддержки Java.
    Запустить файл %ROOT%\sample.reg на выполнение.
 5. Запустить первоначальную настройку сервиса имен:  
    `omniNames -start`.

